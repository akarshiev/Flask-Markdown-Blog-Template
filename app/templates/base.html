<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Blog{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"
          integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw=="
          crossorigin="anonymous" referrerpolicy="no-referrer"/>
    <style>

        .code-wrapper {
            position: relative;
            margin-bottom: 1.5em;
        }

        .copy-btn {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background: #4B5563;
            color: white;
            padding: 0.2rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.2s;
        }

        .code-wrapper:hover .copy-btn {
            opacity: 1;
        }

        .prose img {
            max-width: 100%;
            border-radius: 0.5rem;
            margin-top: 1.5em;
            margin-bottom: 1.5em;
        }

        .prose img {
            max-width: 700px;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }
    </style>
</head>
<body class="bg-white text-gray-900 font-sans antialiased flex flex-col min-h-screen">

<header class="border-b border-gray-200 py-6">
    <div class="max-w-3xl mx-auto px-4 flex justify-between items-center">
        <a href="/" class="text-xl font-bold tracking-tight">O'zbek sahifasi</a>
        <div class="text-sm text-gray-500 space-x-3">
            <a href="https://github.com/akarshiev" class="hover:text-black transition">GitHub</a>
            <span>|</span>
            <a href="https://t.me/abdukarim_qarshiyev" class="hover:text-black transition">Telegram</a>
        </div>
    </div>
</header>

<main class="flex-grow max-w-3xl mx-auto px-4 py-10 w-full">
    {% with messages = get_flashed_messages() %}
    {% if messages %}
    <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4">
        {{ messages[0] }}
    </div>
    {% endif %}
    {% endwith %}

    {% block content %}{% endblock %}
</main>

<footer class="border-t border-gray-200 py-8 text-center text-gray-500 text-sm">
    &copy; Abdukarim Qarshiyev
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script>
    hljs.highlightAll();

    document.querySelectorAll('pre code').forEach((codeBlock) => {
        const pre = codeBlock.parentElement;
        const wrapper = document.createElement('div');
        wrapper.className = 'code-wrapper';

        pre.parentNode.insertBefore(wrapper, pre);
        wrapper.appendChild(pre);

        const button = document.createElement('button');
        button.innerText = 'Copy';
        button.className = 'copy-btn';

        button.addEventListener('click', () => {
            navigator.clipboard.writeText(codeBlock.innerText).then(() => {
                button.innerText = 'Copied!';
                setTimeout(() => button.innerText = 'Copy', 2000);
            });
        });

        wrapper.appendChild(button);
    });
</script>
</body>
</html>